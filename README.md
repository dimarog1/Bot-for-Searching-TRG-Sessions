# Бот для поиска TRG сессий

## Запуск

### Poetry

```bash
poetry install
```

```bash
poetry shell
```

### .env файл

```bash
make env
```

Далее запишите в него токен бота

### База данных

```bash
make db
```

```bash
make migrate head
```

### Запуск бота

```bash
make run
```

## Руководство разработчику

### Если сделаны изменения в БД, то нужно добавить ревизию

```bash
make revision
```

### Паттерн

В основе лежит паттерн MVC, то есть для каждой новой функции (желательно) надо писать [model](bot/models), [view](bot/views) и [controller](bot/controllers).

### Добавление нового функционала

Так как у нас очень крутая система автоматического добавления нового функционала боту, есть правила нейминга функций в контроллерах:
- Команды (cmd_): Методы для команд.
- Текстовые сообщения (msg_): Методы для текстовых сообщений.
- Инлайн-кнопки (cb_): Методы для обработки колбэков.
- Инлайн-запросы (inline_): Методы для обработки инлайн-запросов.
- Ошибки (err_): Методы для обработки ошибок.

Потом, когда model, view и controller написаны добавляем в [\__init\__.py](bot/controllers/__init__.py) инициализацию написанного контроллера.
